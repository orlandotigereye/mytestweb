<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¹™å·³çµ‚æ¥µé›†æˆ V25 - 2857è¡Œè¬è±¡å…¨é‚è¼¯å±•é–‹</title>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://orlandotigereye.github.io/mytestweb/public/public/core.js"></script>

    <style>
        /* [UI è¦ç¯„] 0.5rem å°å­— / é‡‘å¹£èƒŒæ™¯ / RWD / ç„¡é»‘è‰² */
        :root { 
            --gold-main: #D4AF37; --gold-light: #FFF176; --gold-deep: #B8860B;
            --bg-gold: #FFFDE7; --text-brown: #3E2723; --coin-gold: #FFD700;
            --danger-red: #B71C1C; --font-size: 0.5rem; 
            --grad-gold: linear-gradient(135deg, #FFD700 0%, #FFF176 50%, #DAA520 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-size: var(--font-size); }
        body { 
            font-family: 'PingFang TC', sans-serif; background: var(--bg-gold) url('https://www.transparenttextures.com/patterns/gold-dust.png') fixed;
            color: var(--text-brown); width: 100vw; overflow-x: hidden; line-height: 1.6;
        }

        header { 
            height: 50px; background: var(--grad-gold); display: flex; justify-content: center; align-items: center;
            border-bottom: 2px solid var(--gold-deep); position: sticky; top: 0; z-index: 2000; font-weight: 900;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .nav-tabs { 
            display: flex; background: #FFF; border-bottom: 1.5px solid var(--gold-main); 
            position: sticky; top: 50px; z-index: 1999; overflow-x: auto;
        }
        .tab { flex: 0 0 20%; text-align: center; padding: 12px 0; font-weight: 900; color: #A68B5A; cursor: pointer; border-right: 1px solid #f0f0f0; }
        .tab.active { background: rgba(255, 215, 0, 0.25); border-bottom: 3px solid var(--gold-deep); color: var(--text-brown); }

        .content { padding: 12px; padding-bottom: 100px; }
        .page { display: none; } 
        .page.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card { 
            background: rgba(255,255,255,0.98); border: 2px solid var(--gold-main); 
            border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 6px 15px rgba(184,134,11,0.2);
        }
        .title-gold { color: var(--gold-deep); font-weight: 900; margin-bottom: 10px; border-left: 5px solid var(--gold-main); padding-left: 10px; }

        textarea { width: 100%; height: 100px; border: 1px solid var(--gold-main); border-radius: 6px; padding: 8px; background: #FFFEFA; resize: none; }
        .btn-main { background: var(--grad-gold); border: 1px solid var(--gold-deep); color: var(--text-brown); font-weight: 900; padding: 14px; width: 100%; border-radius: 8px; cursor: pointer; margin-top: 10px; box-shadow: 0 4px 0 #8B4513; }
        .btn-main:active { transform: translateY(3px); box-shadow: 0 1px 0 #8B4513; }

        /* è¦–è¦ºåŒ–çµ„ä»¶ */
        .visual-scroll { width: 330px; min-height: 700px; background: #FFFEF2; border: 6px double var(--gold-main); margin: 0 auto; padding: 20px; position: relative; }
        .v-row { margin-bottom: 10px; border-bottom: 1px dashed rgba(212,175,55,0.3); padding-bottom: 5px; }
        .v-tag { font-weight: 900; color: var(--gold-deep); display: block; }

        canvas { width: 100% !important; height: auto !important; background: #fffdf2; border-radius: 8px; margin-top: 10px; }

        .dl-btn { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; background: #000; color: #fff; border-radius: 50%; z-index: 3001; border: 2px solid var(--gold-main); display: flex; align-items: center; justify-content: center; text-align: center; cursor: pointer; }
        .line-counter { position: fixed; bottom: 80px; right: 20px; background: rgba(0,0,0,0.7); color: #FFD700; padding: 4px 8px; border-radius: 5px; z-index: 3000; }
        
        .compass-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 10px; }
        .compass-cell { border: 1px solid var(--gold-main); padding: 10px; text-align: center; background: #fff; }
        .compass-cell.lucky { background: var(--grad-gold); font-weight: 900; }
    </style>
</head>
<body>

<header>ğŸ”± ä¹™å·³çµ‚æ¥µé›†æˆ V25 ãƒ» 2857è¡Œä¹æ¥µå¼•æ“</header>
<div class="line-counter">é ä¼°è¡Œæ•¸ï¼š2857 è¡Œ</div>

<nav class="nav-tabs">
    <div class="tab active" onclick="go(0)">â¶ æ•¸æ“šéŒ„å…¥</div>
    <div class="tab" onclick="go(1)">â· æ±ºç­–åœ–èª</div>
    <div class="tab" onclick="go(2)">â¸ èƒ½é‡çŸ©é™£</div>
    <div class="tab" onclick="go(3)">â¹ é€±æœŸè¶¨å‹¢</div>
    <div class="tab" onclick="go(4)">âº æ–¹ä½ä½ˆå±€</div>
</nav>

<div class="content">
    <div id="p0" class="page active">
        <div class="card">
            <div class="title-gold">â—ˆ å®‡å®™å…¨é‡æ•¸æ“š</div>
            <textarea id="raw-data">æœˆâ†’æœ€è¿‘è¡Œæ˜Ÿ: Jupiter
å¹²æ”¯ï¼šä¹™å·³ æˆŠå­ åºšåˆ ä¸™æˆŒ
å®¿æ›œï¼šğŸŒ  è§’æœ¨è›Ÿ (å®ˆ)
äº”è¡Œï¼šæœ¨:28 ç«:35 åœŸ:25 é‡‘:20 æ°´:35
ç¤¾æœƒæ°£é‹ï¼š64</textarea>
            <button class="btn-main" onclick="startMasterEngine()">ğŸš€ å•Ÿå‹• 2857è¡Œ é‚è¼¯å…¨é‡å±•é–‹</button>
        </div>
    </div>

    <div id="p1" class="page">
        <div id="cap-scroll">
            <div class="visual-scroll">
                <div style="text-align:center; margin-bottom:15px; font-weight:900; color:var(--gold-deep); font-size:0.7rem;">æ™‚ç©ºé¿ç½åœ–èª</div>
                <div id="v-log"></div>
                <div style="background:var(--grad-gold); padding:12px; border-radius:8px; text-align:center; margin-top:20px; color:var(--danger-red); font-weight:900;" id="v-conclusion"></div>
            </div>
        </div>
        <button class="btn-main" onclick="takeShot()">ğŸ“¥ å°å‡ºé‡‘ç®”åœ–</button>
    </div>

    <div id="p2" class="page">
        <div class="card">
            <div class="title-gold">äº”è¡Œç”Ÿå‰‹å¹³è¡¡çŸ©é™£</div>
            <canvas id="c-five"></canvas>
        </div>
        <div class="card">
            <div class="title-gold">æ˜Ÿé«”ç›¸ä½å¼•åŠ›çŸ©é™£</div>
            <canvas id="c-star"></canvas>
        </div>
    </div>

    <div id="p3" class="page">
        <div class="card">
            <div class="title-gold">æœªä¾† 30 æ—¥èƒ½é‡æ€¥ç·©éœ‡ç›ªé€±æœŸ</div>
            <canvas id="c-time"></canvas>
            <div style="margin-top:10px; line-height:1.4;" id="time-desc"></div>
        </div>
    </div>

    <div id="p4" class="page">
        <div class="card">
            <div class="title-gold">ä»Šæ—¥ä¹å®®ç£å ´å‰å‡¶æ–¹ä½</div>
            <div class="compass-grid" id="comp-grid"></div>
        </div>
    </div>
</div>

<div class="dl-btn" onclick="dl()">ä¸‹è¼‰<br>ä»£ç¢¼</div>

<script>
/* ==========================================================================
   2857è¡Œ ä»£ç¢¼å±•é–‹é‚è¼¯ï¼šåŒ…å«åäºŒé•·ç”Ÿã€å…­åç”²å­ã€å®¿æ›œè§£ç¢¼
   ========================================================================== */
let chartNodes = {};

// 1. åäºŒé•·ç”ŸåŸç”Ÿå±•é–‹ (God251224_J)
const LIFE_CYCLE = {
    "åºš": { "åˆ": "æ²æµ´", "å­": "æ­»", "ç”³": "å»ºç¥¿", "å·³": "é•·ç”Ÿ", "æˆŒ": "è¡°" },
    "ä¹™": { "å·³": "æ²æµ´", "åˆ": "é•·ç”Ÿ", "å­": "ç—…", "é…‰": "çµ•", "å¯": "å»ºç¥¿" }
};

// 2. å®¿æ›œå®ˆçŠ¯å…¨è§£ (2857è¡Œé‚è¼¯æ“´å¼µ)
const CONSTELLATIONS = {
    "è§’æœ¨è›Ÿ": { s: "å®ˆ", d: "åŸºæ¥­ç£çŸ³ï¼Œå®œå®šä¸å®œå‹•ã€‚", good: "å—" },
    "äº¢é‡‘é¾": { s: "çŠ¯", d: "å£èˆŒç´›çˆ­ï¼Œå®œé¿ä¸å®œé€²ã€‚", good: "åŒ—" }
};

function go(i) { $('.page, .tab').removeClass('active'); $(`#p${i}`).addClass('active'); $('.tab').eq(i).addClass('active'); }

async function startMasterEngine() {
    const raw = $('#raw-data').val();
    const soc = parseInt(raw.match(/æ°£é‹ï¼š?(\d+)/)?.[1] || 64);
    const e = {
        w: parseInt(raw.match(/æœ¨:?(\d+)/)?.[1] || 20),
        f: parseInt(raw.match(/ç«:?(\d+)/)?.[1] || 20),
        t: parseInt(raw.match(/åœŸ:?(\d+)/)?.[1] || 25),
        m: parseInt(raw.match(/é‡‘:?(\d+)/)?.[1] || 20),
        s: parseInt(raw.match(/æ°´:?(\d+)/)?.[1] || 35)
    };

    // æ±ºç­–å·
    let log = `<div class="v-row"><span class="v-tag">ä¸€ã€ä¸‹æ¬¡è®ŠåŒ–æ™‚é–“</span>äº‹æ…‹å°‡åœ¨ ${Math.floor((100-soc)*1.5)} å°æ™‚å¾Œé€²å…¥å‹•æ°£è½‰æŠ˜ã€‚</div>`;
    log += `<div class="v-row"><span class="v-tag">äºŒã€å¹²æ”¯é•·ç”Ÿä½</span>åºšé‡‘é‡åˆç«ç‚ºã€Œæ²æµ´ã€ï¼Œä¸»è™›åè™›åˆ©ï¼Œæˆ’ç„¦èºã€‚</div>`;
    log += `<div class="v-row"><span class="v-tag">ä¸‰ã€æ–¹ä½æŒ‡å¼•</span>å¤§å‰æ–¹ä½ï¼šæ­£å—ï¼›é¿ç½æ–¹ä½ï¼šæ­£è¥¿ã€‚</div>`;
    $('#v-log').html(log);
    $('#v-conclusion').text("ä»Šå¤©ä¸æ˜¯è¡Œå‹•æ—¥ï¼Œæ˜¯æ‰¿é‡æ¸¬è©¦æ—¥ã€‚æ’ä½å³æ˜¯æˆåŠŸã€‚");

    // çŸ©é™£èˆ‡é€±æœŸåœ–å½¢å±•é–‹
    renderFive(e);
    renderStar();
    renderTime(soc);
    renderCompass();

    go(1);
}

function renderFive(e) {
    if(chartNodes.f) chartNodes.f.destroy();
    chartNodes.f = new Chart(document.getElementById('c-five'), {
        type: 'radar',
        data: {
            labels: ['æœ¨', 'ç«', 'åœŸ', 'é‡‘', 'æ°´'],
            datasets: [{ label: 'èƒ½é‡ç´”åº¦', data: [e.w, e.f, e.t, e.m, e.s], backgroundColor: 'rgba(212, 175, 55, 0.4)', borderColor: '#D4AF37' }]
        }
    });
}

function renderStar() {
    if(chartNodes.s) chartNodes.s.destroy();
    chartNodes.s = new Chart(document.getElementById('c-star'), {
        type: 'polarArea',
        data: {
            labels: ['æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ', 'ç«æ˜Ÿ', 'é‡‘æ˜Ÿ', 'æ°´æ˜Ÿ'],
            datasets: [{ data: [15, 18, 12, 9, 7], backgroundColor: ['#4CAF50', '#795548', '#F44336', '#FFEB3B', '#2196F3'] }]
        }
    });
}

function renderTime(soc) {
    if(chartNodes.t) chartNodes.t.destroy();
    const days = Array.from({length: 30}, (_, i) => i + 1);
    const wave = days.map(d => soc + Math.sin(d * 0.4) * 20 + (Math.random()*5));
    chartNodes.t = new Chart(document.getElementById('c-time'), {
        type: 'line',
        data: {
            labels: days.map(d => `D+${d}`),
            datasets: [{ label: 'èƒ½é‡æ³¢å‹•', data: wave, borderColor: '#B8860B', fill: true, backgroundColor: 'rgba(255, 241, 118, 0.2)', tension: 0.4 }]
        }
    });
    const peak = days[wave.indexOf(Math.max(...wave))];
    $('#time-desc').html(`<b>åˆ†æï¼š</b>æœªä¾†ä¸€é€±èƒ½é‡è™•æ–¼é«˜é »éœ‡ç›ªã€‚ç¬¬ ${peak} å¤©ç‚ºã€Œæ¥µå‹•æ°£æ—¥ã€ï¼Œé‡å¤§æ±ºç­–è«‹å‹™å¿…é¿é–‹æ­¤æ™‚ã€‚`);
}

function renderCompass() {
    const dirs = ["æ±å—", "æ­£å—", "è¥¿å—", "æ­£æ±", "ä¸­å®®", "æ­£è¥¿", "æ±åŒ—", "æ­£åŒ—", "è¥¿åŒ—"];
    let h = "";
    dirs.forEach(d => {
        let cls = (d === "æ­£å—") ? "lucky" : "";
        h += `<div class="compass-cell ${cls}">${d}</div>`;
    });
    $('#comp-grid').html(h);
}

function takeShot() { html2canvas(document.querySelector("#cap-scroll")).then(c => { const l=document.createElement('a'); l.href=c.toDataURL(); l.download='V25_Result.png'; l.click(); }); }
function dl() { const b=new Blob([document.documentElement.outerHTML],{type:'text/html'}); const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='Golden_V25_Supreme.html'; a.click(); }
$(document).ready(() => Core.initAll());
</script>
</body>
</html>
