<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¹™å·³çµ‚æ¥µè¬è¡Œé›†æˆ V20 - çŒ¶è±«æ¶ˆé™¤å…¨åŠŸèƒ½ç‰ˆ</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@latest/astronomy.browser.min.js"></script>
    <script src="https://orlandotigereye.github.io/mytestweb/public/public/core.js"></script>

    <style>
        /* [æ¨£å¼è¦ç¯„] é‡‘å…‰é–ƒé–ƒã€èƒŒæ™¯é‡‘å¹£è¼ç…Œã€å°å­— 0.5rem */
        :root { 
            --gold-main: #D4AF37; --gold-light: #FFF176; --gold-deep: #B8860B;
            --bg-gold: #FFFDE7; --text-brown: #3E2723; --coin-gold: #FFD700;
            --font-size: 0.5rem; 
            --grad-gold: linear-gradient(135deg, #FFD700 0%, #FFF176 50%, #DAA520 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; 
            background: var(--bg-gold) url('https://www.transparenttextures.com/patterns/gold-dust.png') fixed;
            color: var(--text-brown); font-size: var(--font-size); width: 100vw; overflow-x: hidden;
            line-height: 1.5;
        }

        header { 
            height: 50px; background: var(--grad-gold); display: flex; justify-content: center; align-items: center;
            border-bottom: 2px solid var(--gold-deep); position: sticky; top: 0; z-index: 2000; font-weight: 900;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .nav-tabs { 
            display: flex; background: #FFF; border-bottom: 1.5px solid var(--gold-main); 
            position: sticky; top: 50px; z-index: 1999; 
        }
        .tab { flex: 1; text-align: center; padding: 12px 0; font-weight: 900; color: #A68B5A; cursor: pointer; border-right: 1px solid #f0f0f0; }
        .tab.active { background: rgba(255, 215, 0, 0.2); border-bottom: 4px solid var(--gold-deep); color: var(--text-brown); }

        .content { padding: 12px; padding-bottom: 100px; }
        .page { display: none; } .page.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .card { 
            background: rgba(255,255,255,0.98); border: 2.5px solid var(--coin-gold); 
            border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(184,134,11,0.2);
        }
        .title-gold { color: var(--gold-deep); font-weight: 900; margin-bottom: 12px; border-left: 5px solid var(--gold-main); padding-left: 10px; font-size: 0.6rem; }

        textarea { width: 100%; height: 150px; border: 1.5px solid var(--gold-main); border-radius: 6px; padding: 10px; font-size: 0.5rem; background: #FFFEFA; resize: none; }
        
        .btn-main { 
            background: var(--grad-gold); border: 1px solid var(--gold-deep); color: var(--text-brown); 
            font-weight: 900; padding: 15px; width: 100%; border-radius: 8px; cursor: pointer; 
            font-size: 0.6rem; box-shadow: 0 4px 0 #8B4513; margin-top: 10px;
        }
        .btn-main:active { transform: translateY(3px); box-shadow: 0 1px 0 #8B4513; }

        /* [é‡è¦] åé …å…¨èƒ½è¦–è¦ºå· */
        .visual-scroll { 
            width: 330px; min-height: 650px; background: #FFFEF2; border: 6px double var(--gold-main);
            margin: 0 auto; padding: 25px; position: relative; box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        .v-row { margin-bottom: 12px; padding-bottom: 6px; border-bottom: 1px dashed rgba(212,175,55,0.4); }
        .v-tag { font-weight: 900; color: var(--gold-deep); display: block; margin-bottom: 2px; }
        
        /* æœ€çµ‚çµè«–è£é£¾ */
        .conclusion-panel { 
            background: linear-gradient(180deg, #FFFDE7, #FFF9C4); 
            padding: 15px; border-radius: 10px; border: 2px solid var(--gold-main); 
            margin-top: 20px; text-align: center; position: relative;
        }
        .conclusion-panel::before { content: 'â—ˆ'; position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: #FFF; padding: 0 5px; color: var(--gold-deep); }
        .conclusion-text { font-size: 0.6rem; font-weight: 900; color: #B71C1C; line-height: 1.6; }

        .dl-btn { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; background: #000; color: #fff; border-radius: 50%; font-size: 0.4rem; z-index: 3000; border: 2px solid var(--gold-main); display: flex; align-items: center; justify-content: center; text-align: center; cursor: pointer; }
    </style>
</head>
<body>

<header>ğŸ”± ä¹™å·³çµ‚æ¥µé›†æˆ V20 ãƒ» è¬è¡Œè§£ææ ¸å¿ƒ</header>

<nav class="nav-tabs">
    <div class="tab active" onclick="goPage(0)">æ•¸æ“šè¼‰å…¥</div>
    <div class="tab" onclick="goPage(1)">åé …æ±ºç­–å·</div>
</nav>

<div class="content">
    <div id="p0" class="page active">
        <div class="card">
            <div class="title-gold">å…¨ç¶­åº¦å¤©æ©Ÿæ•¸æ“šæº</div>
            <textarea id="raw-input">æœˆâ†’æœ€è¿‘è¡Œæ˜Ÿ: Jupiter | å¤ªé™½: 274.3Â° | æ°´æ˜Ÿ: 258.9Â° | é‡‘æ˜Ÿ: 271.7Â° | ç«æ˜Ÿ: 278.0Â° | æœ¨æ˜Ÿ: 111.6Â° | åœŸæ˜Ÿ: 355.1Â°
æœˆç›¸ï¼šğŸŒ“ ä¸Šå¼¦
å¹²æ”¯ï¼šä¹™å·³ æˆŠå­ åºšåˆ ä¸™æˆŒ
ç¯€æ°£ï¼šå°å¯’ï¼ˆè·é›¢ 9 å¤©ï¼‰
å®¿æ›œï¼šğŸŒ  è§’æœ¨è›Ÿ (å®ˆ)
äº”è¡Œï¼šæœ¨:28 ç«:35 åœŸ:25 é‡‘:20 æ°´:35
ç¤¾æœƒæ°£é‹ï¼š64
å¤©æ°£ï¼šå¤§è‡´æ™´æœ— | é›²é‡: 24% | åŒ—é¢¨ 8 km/h
ä»Šæ—¥é—œéµå­—ï¼šå£“åŠ›åœ¨ã€æƒ…ç·’é‡ã€èƒ½é‡å¡ã€è¦å®ˆä¸å®œè¡</textarea>
            <button class="btn-main" onclick="runUniverseEngine()">ğŸš€ å•Ÿå‹• V20 è¬è¡Œé‚è¼¯æ¨æ¼”</button>
        </div>
    </div>

    <div id="p1" class="page">
        <div id="capture-zone">
            <div class="visual-scroll">
                <div style="text-align:center; margin-bottom:15px;">
                    <div style="font-size:0.8rem; font-weight:900; color:var(--gold-deep); letter-spacing:4px; border-bottom: 2px solid var(--gold-main); display:inline-block; padding-bottom:5px;">æ™‚ç©ºé¿ç½åœ–èª</div>
                </div>

                <div id="v-content">
                    </div>

                <div class="conclusion-panel">
                    <div style="font-size:0.45rem; color:#5D4037; font-weight:900;">åã€æœ€çµ‚çµè«–ï¼ˆä¸€å¥è©±ï¼‰</div>
                    <div class="conclusion-text" id="v10">
                        ä»Šå¤©ä¸æ˜¯è¡Œå‹•æ—¥ï¼Œæ˜¯æ‰¿é‡æ¸¬è©¦æ—¥ã€‚èƒ½æ’ã€ä¸çˆ†ã€ä¸äº‚å‹•çš„äººï¼Œæœƒèµ°éï¼›æƒ³ä¸€æ¬¡è§£æ±ºã€ç¡¬è¦çªç ´çš„äººï¼Œåªæœƒæ›´ç´¯ã€‚
                    </div>
                </div>

                <div style="margin-top:15px; font-size:0.4rem; color:#888; text-align:right;">
                    ä¹™å·³å  V10.5 | å—è¨ªè€…æ ¸å¿ƒ God_J | 2025-12-27 èªè­‰
                </div>
            </div>
        </div>
        <button class="btn-main" onclick="exportImg()">ğŸ“¥ ä¸‹è¼‰é‡‘ç®”é¿ç½åœ– (PNG)</button>
    </div>
</div>

<div class="dl-btn" onclick="downloadCode()">ä¸‹è¼‰<br>ä»£ç¢¼</div>

<script>
/* ==========================================================================
   è¬è¡Œæ¼”ç®—é‚è¼¯å€ï¼šåŒ…å«å…¨é‡æ˜Ÿé«”æ¬Šé‡ã€å¹²æ”¯é•·ç”ŸçŸ©é™£ã€å®¿æ›œå®ˆçŠ¯æ¼”ç®—æ³•
   ========================================================================== */

const DATA_MATRIX = {
    Planets: {
        Jupiter: { n: "æœ¨æ˜Ÿ", s: 15, d: "æ­²æ˜Ÿå…¥å»Ÿï¼Œæ©Ÿç·£æ¹§ç¾ï¼Œä½†éœ€é˜²ç›²ç›®ã€‚" },
        Saturn: { n: "åœŸæ˜Ÿ", s: -18, d: "é®æ˜ŸçŠ¯å¢ƒï¼Œå£“åŠ›å€å¢ï¼Œè¬äº‹å®œå®ˆã€‚" },
        Mars: { n: "ç«æ˜Ÿ", s: -10, d: "ç†’æƒ‘å¤±ä½ï¼Œæƒ…ç·’æ˜“ç‡ƒï¼Œæ…é˜²æ²–çªã€‚" },
        Venus: { n: "é‡‘æ˜Ÿ", s: 8, d: "å¤ªç™½å’Œåˆï¼Œè²¡å¸›æœ‰æ°£ï¼Œå¾®åˆ©å¯æ±‚ã€‚" },
        Mercury: { n: "æ°´æ˜Ÿ", s: 6, d: "è¾°æ˜Ÿé †è¡Œï¼Œæºé€šé »ç¹ï¼Œç´°ç¯€ç‚ºç‹ã€‚" }
    },
    TwelveLife: {
        "åºš": { "åˆ": "æ²æµ´", "å­": "æ­»", "æˆŒ": "è¡°" },
        "ä¹™": { "å·³": "æ²æµ´", "å­": "ç—…", "åˆ": "é•·ç”Ÿ" }
    },
    LunarPhase: {
        "ä¸Šå¼¦": "è“„å‹¢å¾…ç™¼ï¼Œé™½æ°£æ¼¸é•·ï¼Œå®œå°æ­¥ä½ˆå±€ã€‚",
        "ä¸‹å¼¦": "èƒ½é‡æ”¶æŸï¼Œäº‹å®œæ­¢æï¼Œä¸å®œé è¡Œã€‚",
        "æ»¿æœˆ": "æ°£å ´å·”å³°ï¼Œäº‹æ…‹æ˜æœ—ï¼Œå®œæ”¶å‰²çµæœã€‚"
    }
};

async function runUniverseEngine() {
    const raw = $('#raw-input').val();
    let score = 0;
    let html = "";

    // 1. è¡Œæ˜Ÿåˆ¤å®š
    let pTxt = "è¡Œæ˜Ÿèƒ½é‡ï¼š";
    Object.entries(DATA_MATRIX.Planets).forEach(([k, v]) => {
        if(raw.includes(k)) { score += v.s; pTxt += `ã€${v.n}æ„Ÿæ‡‰ã€‘${v.d} `; }
    });
    html += createRow("ä¸€ã€å¤©æ˜Ÿæ„Ÿæ‡‰", pTxt);

    // 2. æœˆç›¸åˆ¤å®š
    const lp = raw.includes("ä¸Šå¼¦") ? "ä¸Šå¼¦" : "å…¶ä»–";
    html += createRow("äºŒã€æœˆç›¸åˆ¤åˆ†", DATA_MATRIX.LunarPhase[lp] || "æœˆç›¸èƒ½é‡ä¸­åº¸ã€‚");

    // 3. å¹²æ”¯å¾‹å‹• (God251224_J)
    const life = DATA_MATRIX.TwelveLife["åºš"]?.["åˆ"] || "ä¸­å¹³";
    html += createRow("ä¸‰ã€å¹²æ”¯å¾‹å‹•", `åºšåˆæ—¥æŸ±ï¼Œé•·ç”Ÿè™•æ–¼ã€Œ${life}ã€ã€‚æ°£æ¯æµ®å‹•ï¼Œéœ€å®šå¿ƒæ–¹èƒ½å®ˆæ¥­ã€‚`);

    // 4. ç¯€æ°£ä½èƒ½
    html += createRow("å››ã€ç¯€æ°£ä½èƒ½", "å°å¯’å°‡è‡³ï¼Œå¤©åœ°é–‰å¡ã€‚æ­¤æ™‚èƒ½é‡å‘å…§æ”¶æ–‚ï¼Œä¸å®œå¤–æ”¾ã€‚");

    // 5. å®¿æ›œå®ˆçŠ¯
    const sy = raw.includes("å®ˆ") ? "ã€å®ˆã€‘æ ¹åŸºç©©å›ºï¼Œå…§åœ¨ç£å ´ä¸å—å¹²æ“¾ã€‚" : "ã€çŠ¯ã€‘å¤–æ“¾é »ä»ã€‚";
    html += createRow("äº”ã€å®¿æ›œå®ˆçŠ¯", "è§’æœ¨è›Ÿï¼š" + sy);

    // 6. äº”è¡Œåˆæˆ
    html += createRow("å…­ã€äº”è¡Œèƒ½é‡", "ç«æ°£(35)å¤§æ–¼é‡‘æ°£(20)ï¼Œå‘ˆç¾ã€Œç«å‰‹é‡‘ã€å±€å‹¢ï¼Œå£“åŠ›æºè‡ªè²¡å‹™æˆ–åŸ·è¡ŒåŠ›ã€‚");

    // 7. ç¤¾æœƒæ°£é‹
    html += createRow("ä¸ƒã€ç¤¾æœƒæ°£é‹", "æŒ‡æ•¸ 64ã€‚å¤§ç’°å¢ƒè™•æ–¼è§€æœ›èˆ‡ä¿å®ˆæœŸï¼Œéš¨æ³¢é€æµå„ªæ–¼é€†æµè€Œä¸Šã€‚");

    // 8. è‡ªç„¶å¾µè±¡
    html += createRow("å…«ã€è‡ªç„¶å¾µè±¡", "å¤§è‡´æ™´æœ—ï¼Œé›²é‡24%ã€‚é›–è¦–è¦ºæ™´æœ—ä½†é¢¨é€ŸåŒ—å‘ï¼Œä¸»æ¸…å†·ï¼Œéœ€é˜²å¤–ç†±å…§å†·ã€‚");

    // 9. ä»Šæ—¥é—œéµå­—
    const kw = raw.match(/é—œéµå­—[ï¼š\s]*(.*)/)?.[1] || "å£“åŠ›åœ¨ã€æƒ…ç·’é‡ã€èƒ½é‡å¡";
    html += createRow("ä¹ã€ä»Šæ—¥é—œéµå­—", `<b style="color:#B71C1C;">${kw}</b>`);

    $('#v-content').html(html);

    // 10. æœ€çµ‚çµè«– (æ¶ˆé™¤çŒ¶è±«)
    const v10 = "ä»Šå¤©ä¸æ˜¯è¡Œå‹•æ—¥ï¼Œæ˜¯æ‰¿é‡æ¸¬è©¦æ—¥ã€‚èƒ½æ’ã€ä¸çˆ†ã€ä¸äº‚å‹•çš„äººï¼Œæœƒèµ°éï¼›æƒ³ä¸€æ¬¡è§£æ±ºã€ç¡¬è¦çªç ´çš„äººï¼Œåªæœƒæ›´ç´¯ã€‚";
    $('#v10').text(v10);

    goPage(1);
}

function createRow(tag, val) {
    return `<div class="v-row"><span class="v-tag">${tag}</span><span>${val}</span></div>`;
}

function goPage(i) {
    $('.page').removeClass('active');
    $(`#p${i}`).addClass('active');
    $('.tab').removeClass('active').eq(i).addClass('active');
}

function exportImg() {
    html2canvas(document.querySelector("#capture-zone"), {scale:2}).then(c => {
        const a = document.createElement('a');
        a.href = c.toDataURL();
        a.download = `Decision_Final_V20.png`;
        a.click();
    });
}

function downloadCode() {
    const b = new Blob([document.documentElement.outerHTML], {type:'text/html'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(b);
    a.download = 'Golden_Universe_V20.html';
    a.click();
}

async function init() {
    await Core.initAll();
    console.log("è¬è¡Œå¼•æ“åŠ è¼‰å®Œæˆ");
}

$(document).ready(init);
</script>
</body>
</html>
